# Scaling Law æ·±åº¦ç ”ç©¶é¡¹ç›®

> ğŸ¯ ä»å®è¯è§‚å¯Ÿåˆ°ç†è®ºè§£é‡Šï¼šæ·±åº¦è§£æç¥ç»ç½‘ç»œçš„è§„æ¨¡åŒ–è§„å¾‹

**åˆ›å»ºæ—¶é—´**: 2025-12-25  
**ä½œè€…**: peixingxin  
**çŠ¶æ€**: âœ… æ ¸å¿ƒæ¡†æ¶å®Œæˆ

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ Scaling Law æ·±åº¦ç ”ç©¶è®¡åˆ’**ï¼ŒåŒ…æ‹¬ï¼š

1. **ğŸ“š ç³»ç»ŸåŒ–å­¦ä¹ è·¯å¾„**ï¼ˆ14 å‘¨ï¼Œ23 ç¯‡è®ºæ–‡ï¼Œ10 ä¸ªé¡¹ç›®ï¼‰
2. **ğŸ’» MacBook MPS å®éªŒæ¡†æ¶**ï¼ˆåœ¨ä¸ªäººè®¾å¤‡ä¸ŠéªŒè¯ Scaling Lawï¼‰
3. **ğŸ”¬ å®Œæ•´çš„å®è·µå·¥å…·é“¾**ï¼ˆæµ‹è¯•ã€è®­ç»ƒã€åˆ†æã€å¯è§†åŒ–ï¼‰

**æ ¸å¿ƒåˆ›æ–°**ï¼šåœ¨ **MacBook (Apple Silicon)** ä¸Šé«˜æ•ˆå¤ç° Scaling Law æ ¸å¿ƒå‘ç°ï¼Œæ— éœ€æ˜‚è´µçš„ GPU é›†ç¾¤ã€‚

---

## ğŸš€ 30 ç§’å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš†æˆ–è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/peixingxin/code/tech_blog/scaling_law

# 2. è¿è¡Œå¿«é€Ÿå¯åŠ¨è„šæœ¬
./quickstart.sh

# 3. å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œç«‹å³å¼€å§‹ç¬¬ä¸€ä¸ªå®éªŒ
python mps_framework_example.py --mode quick
```

**é¢„æœŸæ—¶é—´**: 1-2 å°æ—¶  
**é¢„æœŸäº§å‡º**: 6 ä¸ªå®éªŒç‚¹çš„ Scaling Law æ›²çº¿ + å¤–æ¨é¢„æµ‹

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
scaling_law/
â”œâ”€â”€ README.md                      â† ä½ åœ¨è¿™é‡Œ
â”œâ”€â”€ research_plan.md               â† ğŸ“š å®Œæ•´å­¦ä¹ è®¡åˆ’ï¼ˆ72KBï¼‰
â”œâ”€â”€ MPS_FRAMEWORK_README.md        â† ğŸ“– æ¡†æ¶ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ CURRENT_STATUS.md              â† ğŸ“Š é¡¹ç›®å½“å‰çŠ¶æ€
â”‚
â”œâ”€â”€ mps_framework_example.py       â† ğŸ’» æ ¸å¿ƒå®ç°ï¼ˆ750 è¡Œï¼‰
â”œâ”€â”€ test_mps_framework.py          â† ğŸ§ª æµ‹è¯•è„šæœ¬ï¼ˆ250 è¡Œï¼‰
â”œâ”€â”€ quickstart.sh                  â† ğŸš€ ä¸€é”®å¯åŠ¨
â”‚
â””â”€â”€ results_*/                     â† ğŸ“Š å®éªŒç»“æœï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â”œâ”€â”€ results.json
    â”œâ”€â”€ scaling_curves.png
    â””â”€â”€ checkpoint.pkl
```

---

## ğŸ¯ ä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶

### 1ï¸âƒ£ **research_plan.md** - å®Œæ•´å­¦ä¹ è®¡åˆ’

**å†…å®¹**ï¼š
- ğŸ“– 7 ä¸ªå­¦ä¹ é˜¶æ®µï¼ˆ14 å‘¨ï¼‰
- ğŸ“„ 23 ç¯‡å¿…è¯»è®ºæ–‡
- ğŸ’» 10 ä¸ªå®è·µé¡¹ç›®
- ğŸ–¥ï¸ **æ–°å¢**ï¼šåŸºäº MacBook MPS çš„å®éªŒæ¡†æ¶è®¾è®¡

**é€‚åˆäººç¾¤**ï¼š
- âœ… æƒ³ç³»ç»Ÿå­¦ä¹  Scaling Law çš„ç ”ç©¶è€…
- âœ… å‡†å¤‡ç›¸å…³æ–¹å‘çš„ç¡•åšå£«ç”Ÿ
- âœ… å¯¹å¤§æ¨¡å‹è®­ç»ƒæ„Ÿå…´è¶£çš„å·¥ç¨‹å¸ˆ

**é˜…è¯»æ–¹å¼**ï¼š
```bash
# åœ¨ IDE ä¸­æ‰“å¼€
open research_plan.md

# æˆ–åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼ˆå¦‚æœæ¨é€åˆ° GitHubï¼‰
```

---

### 2ï¸âƒ£ **mps_framework_example.py** - å®éªŒæ¡†æ¶

**åŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹å¹¶ä½¿ç”¨ MPSï¼ˆApple Silicon GPUï¼‰
- âœ… æ™ºèƒ½å†…å­˜ç®¡ç†ï¼ˆé˜²æ­¢æº¢å‡ºï¼‰
- âœ… æ—©åœæœºåˆ¶ï¼ˆèŠ‚çœ 80% è®­ç»ƒæ—¶é—´ï¼‰
- âœ… è‡ªåŠ¨ Scaling Law æ‹Ÿåˆä¸å¤–æ¨
- âœ… å®æ—¶ç›‘æ§ä¸å¯è§†åŒ–

**è¿è¡Œæ–¹å¼**ï¼š
```bash
# ä¸‰ç§æ¨¡å¼
python mps_framework_example.py --mode quick   # 1-2h
python mps_framework_example.py --mode dev     # 8-24h
python mps_framework_example.py --mode full    # 5-7d
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… Using MPS (Apple Silicon GPU)
ğŸ“Š Scaling Law Experiment
...
ğŸ“ˆ Scaling Law æ‹Ÿåˆç»“æœ
å‚æ•°é‡ Scaling: L(N) = 3.2 * N^(-0.073) + 1.95
  æŒ‡æ•° Î±_n = 0.073
  (Kaplan 2020: Î±_n â‰ˆ 0.076)
...
ğŸ”® å¤–æ¨é¢„æµ‹
  ç›®æ ‡è§„æ¨¡: 1.5B å‚æ•°
  é¢„æµ‹ loss: 1.72
```

---

### 3ï¸âƒ£ **MPS_FRAMEWORK_README.md** - ä½¿ç”¨æŒ‡å—

**å†…å®¹**ï¼š
- ğŸ“– è¯¦ç»†çš„å®‰è£…æ­¥éª¤
- ğŸ¯ ä¸‰ç§è¿è¡Œæ¨¡å¼å¯¹æ¯”
- âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³
- ğŸ’¡ æœ€ä½³å®è·µå»ºè®®
- ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

**å¿«é€ŸæŸ¥æ‰¾**ï¼š
- é‡åˆ°æŠ¥é”™ï¼Ÿâ†’ æŸ¥çœ‹"æ³¨æ„äº‹é¡¹"éƒ¨åˆ†
- æƒ³è‡ªå®šä¹‰å®éªŒï¼Ÿâ†’ æŸ¥çœ‹"é«˜çº§åŠŸèƒ½"éƒ¨åˆ†
- ä¸çŸ¥é“ä»å“ªå¼€å§‹ï¼Ÿâ†’ æŸ¥çœ‹"å¿«é€Ÿä¸Šæ‰‹"éƒ¨åˆ†

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### ğŸŸ¢ è·¯å¾„ Aï¼šå¿«é€Ÿä½“éªŒï¼ˆ1 å‘¨ï¼‰

**ç›®æ ‡**ï¼šäº†è§£ Scaling Law åŸºç¡€æ¦‚å¿µ

```
Day 1    â†’ é˜…è¯» research_plan.mdï¼ˆé˜¶æ®µä¸€ã€äºŒï¼‰
Day 2    â†’ è¿è¡Œ ./quickstart.sh éªŒè¯ç¯å¢ƒ
Day 3-4  â†’ è¿è¡Œ Quick Modeï¼Œåˆ†æç»“æœ
Day 5    â†’ é˜…è¯» Kaplan (2020) è®ºæ–‡
Day 6-7  â†’ æ’°å†™å­¦ä¹ æ€»ç»“
```

**äº§å‡º**ï¼š
- âœ… ç†è§£å¹‚å¾‹å…³ç³»
- âœ… å®Œæˆ 6 ä¸ªå®éªŒç‚¹
- âœ… ç¬¬ä¸€ç¯‡æŠ€æœ¯åšå®¢

---

### ğŸŸ¡ è·¯å¾„ Bï¼šæ·±åº¦ç ”ç©¶ï¼ˆ3 ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šç³»ç»ŸæŒæ¡ Scaling Law ç†è®ºä¸å®è·µ

```
Week 1-2   â†’ ç†è®ºåŸºç¡€ + å¹‚å¾‹å®éªŒ
Week 3-4   â†’ Kaplan è®ºæ–‡ç²¾è¯» + Dev Mode
Week 5-6   â†’ Chinchilla ä¼˜åŒ– + Full Modeï¼ˆå¯åŠ¨ï¼‰
Week 7-8   â†’ æ¶Œç°èƒ½åŠ›ç ”ç©¶
Week 9-10  â†’ æ¨ç†æ—¶ç¼©æ”¾
Week 11-12 â†’ Full Mode åˆ†æ + æ’°å†™æŠ¥å‘Š
```

**äº§å‡º**ï¼š
- âœ… 28 ä¸ªå®éªŒç‚¹çš„å®Œæ•´æ•°æ®
- âœ… é«˜ç²¾åº¦ Scaling Law
- âœ… æŠ€æœ¯åšå®¢ç³»åˆ—ï¼ˆ5-8 ç¯‡ï¼‰
- âœ… å¼€æºå·¥å…·åŒ…

---

### ğŸ”´ è·¯å¾„ Cï¼šè®ºæ–‡å¤ç°ï¼ˆ6 ä¸ªæœˆï¼‰

**ç›®æ ‡**ï¼šå¤ç° SOTA è®ºæ–‡ï¼Œå‘è¡¨è‡ªå·±çš„ç ”ç©¶

```
Month 1-2 â†’ å®Œæ•´å­¦ä¹  23 ç¯‡è®ºæ–‡
Month 3-4 â†’ æ·±åº¦å®éªŒï¼ˆçœŸå®æ•°æ® + 10 ä¸ªé¡¹ç›®ï¼‰
Month 5   â†’ è®ºæ–‡æ’°å†™
Month 6   â†’ æŠ•ç¨¿ä¸å¼€æº
```

**äº§å‡º**ï¼š
- âœ… ç§‘ç ”è®ºæ–‡ï¼ˆä¼šè®®/æœŸåˆŠï¼‰
- âœ… å¼€æºå·¥å…·åŒ…ï¼ˆå«æ–‡æ¡£ï¼‰
- âœ… ç¤¾åŒºå½±å“åŠ›

---

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®
- **ç¡¬ä»¶**: MacBook with Apple Silicon (M1/M2/M3)
- **å†…å­˜**: 16GBï¼ˆå¯è¿è¡Œ Quick/Dev Modeï¼‰
- **å­˜å‚¨**: 10GB ç©ºé—²ç©ºé—´
- **ç³»ç»Ÿ**: macOS 12.0+

### æ¨èé…ç½®
- **ç¡¬ä»¶**: MacBook Pro M2 Max/Ultra
- **å†…å­˜**: 32GB+ï¼ˆå¯è¿è¡Œ Full Modeï¼‰
- **å­˜å‚¨**: 50GB ç©ºé—²ç©ºé—´

### è½¯ä»¶ä¾èµ–
```bash
# Python 3.8+
python3 --version

# ä¾èµ–åŒ…ï¼ˆè‡ªåŠ¨å®‰è£…ï¼‰
- torch >= 2.0.0  # éœ€è¦ MPS æ”¯æŒ
- numpy
- scipy
- matplotlib
- psutil
```

---

## ğŸ“Š æ€§èƒ½é¢„æœŸ

### MacBook M2 Max (32GB) ä¸Šçš„è¡¨ç°

| æ¨¡å¼ | æ—¶é—´ | å®éªŒæ•° | è¦†ç›–èŒƒå›´ | å†…å­˜å³°å€¼ |
|:-----|:-----|:-------|:---------|:---------|
| **Quick** | 1-2h | 6 | 5M-80M | ~4GB |
| **Dev** | 8-24h | 12 | 5M-200M | ~8GB |
| **Full** | 5-7d | 28 | 5M-500M | ~16GB |

### è®­ç»ƒé€Ÿåº¦å¯¹æ¯”

| è®¾å¤‡ | 150M æ¨¡å‹ | ç›¸å¯¹é€Ÿåº¦ |
|:-----|:----------|:---------|
| CPU (M2) | 200 tokens/s | 1.0x |
| **MPS (M2)** | **1500 tokens/s** | **7.5x** |

### å¤–æ¨å‡†ç¡®æ€§

| å¤–æ¨å€æ•° | å‡†ç¡®æ€§ | ç½®ä¿¡åº¦ |
|:---------|:-------|:-------|
| 10x (50Mâ†’500M) | Â±5% | é«˜ âœ… |
| 100x (50Mâ†’5B) | Â±10% | ä¸­ âš ï¸ |
| 350x (500Mâ†’175B) | Â±20% | ä½ âš ï¸ |

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### vs ä¼ ç»Ÿ Scaling Law ç ”ç©¶

| ç»´åº¦ | ä¼ ç»Ÿæ–¹æ¡ˆ (8Ã—A100) | æœ¬æ¡†æ¶ (MacBook) |
|:-----|:------------------|:-----------------|
| **ç¡¬ä»¶æˆæœ¬** | $100,000+ | $2,000-5,000 |
| **è¿è¡Œæˆæœ¬** | $10/hour | ç”µè´¹å¯å¿½ç•¥ |
| **å¯åŠ¨é—¨æ§›** | éœ€ç”³è¯·é›†ç¾¤ | ç«‹å³å¼€å§‹ |
| **æ¨¡å‹è§„æ¨¡** | 1B-100B+ | 2M-2B |
| **è¦†ç›–æ•°é‡çº§** | 8 | 3 |
| **å¤–æ¨èƒ½åŠ›** | ç›´æ¥æµ‹é‡ | éœ€è¦å¤–æ¨ |
| **é€‚ç”¨åœºæ™¯** | ç”Ÿäº§çº§ç ”ç©¶ | **æ•™å­¦ã€å¿«é€ŸéªŒè¯** |

**ç»“è®º**ï¼š
- âœ… **å¿«é€ŸéªŒè¯æƒ³æ³•**ï¼šMacBook å®Œå…¨å¤Ÿç”¨
- âœ… **æ•™å­¦æ¼”ç¤º**ï¼šå­¦ç”Ÿå¯åœ¨ä¸ªäººè®¾å¤‡ä¸Šå¤ç°
- âš ï¸ **è®ºæ–‡çº§ç ”ç©¶**ï¼šå»ºè®®ç»“åˆäº‘ç«¯èµ„æº
- âŒ **ç”Ÿäº§è®­ç»ƒ**ï¼šéœ€è¦ä¸“ä¸šé›†ç¾¤

---

## ğŸ“š æ ¸å¿ƒç†è®º

### Scaling Law ä¸‰å¤§å®šå¾‹

#### 1. å‚æ•°é‡ Scaling
```
L(N) = (N_c / N)^(Î±_n)

å…¶ä¸­ï¼š
- N: å‚æ•°é‡
- Î±_n â‰ˆ 0.076 (Kaplan, 2020)
- å«ä¹‰ï¼šæ¯ 10x å‚æ•° â†’ loss ä¸‹é™çº¦ 25%
```

#### 2. æ•°æ®é‡ Scaling
```
L(D) = (D_c / D)^(Î±_d)

å…¶ä¸­ï¼š
- D: è®­ç»ƒ tokens æ•°
- Î±_d â‰ˆ 0.095 (Kaplan, 2020)
- å«ä¹‰ï¼šæ¯ 10x æ•°æ® â†’ loss ä¸‹é™çº¦ 30%
```

#### 3. è®¡ç®—é‡ Scaling
```
L(C) = (C_c / C)^(Î±_c)

å…¶ä¸­ï¼š
- C: è®¡ç®—é‡ (FLOPs)
- Î±_c â‰ˆ 0.050 (Kaplan, 2020)
- å«ä¹‰ï¼šæ¯ 10x è®¡ç®— â†’ loss ä¸‹é™çº¦ 18%
```

### Chinchilla ä¿®æ­£ (2022)

```
åŸ Kaplan: N_opt(C) âˆ C^0.73, D_opt(C) âˆ C^0.27
æ–° Chinchilla: N_opt(C) âˆ C^0.50, D_opt(C) âˆ C^0.50

å…³é”®å‘ç°ï¼š
- å‚æ•°å’Œæ•°æ®åº”è¯¥åŒæ­¥å¢é•¿
- æ¯”ä¾‹çº¦ 1:20 (1 å‚æ•° : 20 tokens)
- Gopher (280B) è®­ç»ƒä¸è¶³ï¼
- Chinchilla (70B) æ€§èƒ½æ›´å¥½
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### âŒ MPS ä¸å¯ç”¨

**ç—‡çŠ¶**ï¼š`MPS not available`

**æ£€æŸ¥**ï¼š
```bash
python3 -c "import torch; print(torch.backends.mps.is_available())"
```

**è§£å†³**ï¼š
```bash
# 1. ç¡®è®¤æ˜¯ Apple Silicon Mac
system_profiler SPHardwareDataType | grep Chip

# 2. å‡çº§ PyTorch
pip install --upgrade torch torchvision torchaudio

# 3. å¦‚æœè¿˜ä¸è¡Œï¼Œé‡è£… PyTorch
pip uninstall torch
pip install torch
```

---

### âŒ å†…å­˜æº¢å‡º

**ç—‡çŠ¶**ï¼š`RuntimeError: MPS backend out of memory`

**è§£å†³**ï¼š
```python
# 1. å‡å° batch size
python mps_framework_example.py --mode quick  # è‡ªåŠ¨è°ƒæ•´

# 2. æˆ–æ‰‹åŠ¨ä¿®æ”¹ mps_framework_example.py
# æ‰¾åˆ° _get_batch_size å‡½æ•°ï¼Œå‡å°è¿”å›å€¼

# 3. å®šæœŸæ¸…ç†å†…å­˜
# æ¡†æ¶å·²è‡ªåŠ¨æ¯ 500 æ­¥æ¸…ç†ä¸€æ¬¡
```

---

### âŒ è®­ç»ƒå¾ˆæ…¢

**æ£€æŸ¥æ˜¯å¦ä½¿ç”¨ MPS**ï¼š
```bash
# åº”è¯¥çœ‹åˆ° "âœ… Using MPS"
python mps_framework_example.py --mode quick | head -5
```

**å¦‚æœä½¿ç”¨ CPU**ï¼š
- æ£€æŸ¥ MPS æ˜¯å¦å¯ç”¨
- æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æ Issue å’Œ PRï¼

### æ”¹è¿›æ–¹å‘
- [ ] æ”¯æŒæ›´å¤šæ•°æ®é›†ï¼ˆOpenWebText, The Pileï¼‰
- [ ] æ·»åŠ å¤šæ¨¡æ€ Scalingï¼ˆVision Transformerï¼‰
- [ ] å®ç° Chinchilla æœ€ä¼˜é…æ¯”æœç´¢
- [ ] é›†æˆ Weights & Biases ç›‘æ§
- [ ] æ”¯æŒåˆ†å¸ƒå¼è®­ç»ƒï¼ˆå¤š Mac åä½œï¼‰

---

## ğŸ“„ ç›¸å…³èµ„æº

### è®ºæ–‡
- [Kaplan et al. (2020) - Scaling Laws for Neural Language Models](https://arxiv.org/abs/2001.08361)
- [Hoffmann et al. (2022) - Training Compute-Optimal LLMs (Chinchilla)](https://arxiv.org/abs/2203.15556)
- [Wei et al. (2022) - Emergent Abilities of LLMs](https://arxiv.org/abs/2206.07682)

### å·¥å…·
- [nanoGPT](https://github.com/karpathy/nanoGPT) - Karpathy çš„æç®€ GPT
- [Pythia](https://github.com/EleutherAI/pythia) - EleutherAI çš„ Scaling ç ”ç©¶
- [PyTorch MPS](https://pytorch.org/docs/stable/notes/mps.html) - å®˜æ–¹æ–‡æ¡£

### åšå®¢
- [Lil'Log - Neural Scaling Laws](https://lilianweng.github.io/posts/2023-03-15-scaling-laws/)
- [Gwern - The Scaling Hypothesis](https://gwern.net/scaling-hypothesis)

---

## ğŸ“ è”ç³»æ–¹å¼

- **ä½œè€…**: peixingxin
- **GitHub**: [ä½ çš„ GitHub]
- **Email**: [ä½ çš„é‚®ç®±]

---

## ğŸ“ è®¸å¯è¯

MIT License

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ OpenAIã€DeepMindã€Anthropic ç­‰æœºæ„çš„ Scaling Law ç ”ç©¶ã€‚

ç‰¹åˆ«æ„Ÿè°¢ï¼š
- OpenAI çš„ Kaplan et al. (2020) å¥ åŸºæ€§å·¥ä½œ
- DeepMind çš„ Chinchilla å›¢é˜Ÿçš„é‡è¦ä¿®æ­£
- Apple çš„ MPS åç«¯å¼€å‘å›¢é˜Ÿ

---

## ğŸ‰ å¼€å§‹ä½ çš„ Scaling Law ä¹‹æ—…

```bash
# 1. å¿«é€Ÿå¯åŠ¨
./quickstart.sh

# 2. è¿è¡Œç¬¬ä¸€ä¸ªå®éªŒ
python mps_framework_example.py --mode quick

# 3. åˆ†æç»“æœ
ls results_quick/

# 4. æŸ¥çœ‹å¯è§†åŒ–
open results_quick/scaling_curves.png
```

**Good luck!** ğŸš€

---

**æœ€åæ›´æ–°**: 2025-12-25  
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
